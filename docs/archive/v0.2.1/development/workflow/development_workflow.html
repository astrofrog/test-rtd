
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    

    <title>Workflow for Developers &mdash; Astropy v0.2.1</title>
<!-- RTD <head> -->
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="//media.readthedocs.org/javascript/underscore.js"></script>
<script type="text/javascript" src="//media.readthedocs.org/javascript/doctools.js"></script>

<script type="text/javascript">
  // This is included here for Javascript that doesn't have access to the templates.
  var doc_version = "v0.2.1";
  var doc_slug = "astropy";
</script>

<script type="text/javascript" src="//media.readthedocs.org/javascript/rtd.js"></script>
<!-- end RTD <head> -->

    
    <link rel="stylesheet" href="../../_static/bootstrap-astropy.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.2.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="shortcut icon" href="../../_static/astropy_logo.ico"/>
    <link rel="top" title="Astropy v0.2.1" href="../../index.html" />
    <link rel="up" title="Contributing To/Developing Astropy or Affiliated Packages" href="index.html" />
    <link rel="next" title="Workflow for Maintainers" href="maintainer_workflow.html" />
    <link rel="prev" title="Git resources" href="git_resources.html" /> 
  </head>
  <body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../../index.html"></a>
  <ul>
    <li><a class="homelink" title="AstroPy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../../genindex.html">Index</a></li>
    <li><a title="Python Module Index" href="../../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="maintainer_workflow.html" title="Workflow for Maintainers">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="git_resources.html" title="Git resources">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../../index.html">Astropy v0.2.1</a>
	 &raquo;
      </li>
      <li><a href="index.html" accesskey="U">Contributing To/Developing Astropy or Affiliated Packages</a> &raquo;</li>
      
      <li>Workflow for Developers</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="workflow-for-developers">
<span id="development-workflow"></span><h1>Workflow for Developers<a class="headerlink" href="#workflow-for-developers" title="Permalink to this headline">¶</a></h1>
<p>In the present document, we refer to the Astropy <tt class="docutils literal"><span class="pre">master</span></tt> branch, as the
<em>trunk</em>.</p>
<div class="section" id="creating-a-fork">
<span id="forking"></span><h2>Creating a fork<a class="headerlink" href="#creating-a-fork" title="Permalink to this headline">¶</a></h2>
<p>You need to do this only once for each package you want to contribute to. The
instructions here are very similar to the instructions at
<a class="reference external" href="http://help.github.com/fork-a-repo/">http://help.github.com/fork-a-repo/</a> — please see that page for more
details. We&#8217;re repeating some of it here just to give the specifics for the
<a class="reference external" href="http://astropy.org">Astropy</a> project, and to suggest some default names.</p>
<div class="section" id="set-up-and-configure-a-github-account">
<h3>Set up and configure a GitHub account<a class="headerlink" href="#set-up-and-configure-a-github-account" title="Permalink to this headline">¶</a></h3>
<p>If you don&#8217;t have a GitHub account, go to the GitHub page, and make one.</p>
<p>You then need to configure your account to allow write access — see
the <em>Generating SSH keys</em> help on <a class="reference external" href="http://help.github.com">GitHub Help</a>.</p>
</div>
<div class="section" id="create-your-own-fork-of-a-repository">
<h3>Create your own fork of a repository<a class="headerlink" href="#create-your-own-fork-of-a-repository" title="Permalink to this headline">¶</a></h3>
<p>The following example shows how to fork the core <tt class="docutils literal"><span class="pre">astropy</span></tt> repository, but the same applies to other packages:</p>
<ol class="arabic">
<li><p class="first">Log into your GitHub account.</p>
</li>
<li><p class="first">Go to the <a class="reference external" href="http://github.com/astropy/astropy">Astropy GitHub</a> home.</p>
</li>
<li><p class="first">Click on the <em>fork</em> button:</p>
<img alt="../../_images/forking_button.png" src="../../_images/forking_button.png" />
<p>Now, after a short pause and some &#8216;Hardcore forking action&#8217;, you
should find yourself at the home page for your own forked copy of <a class="reference external" href="http://astropy.org">Astropy</a>.</p>
</li>
</ol>
</div>
<div class="section" id="setting-up-the-fork-to-work-on">
<h3>Setting up the fork to work on<a class="headerlink" href="#setting-up-the-fork-to-work-on" title="Permalink to this headline">¶</a></h3>
<div class="section" id="overview">
<span id="linking-to-upstream"></span><h4>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h4>
<p>This is done using:</p>
<div class="highlight-python"><pre>git clone git@github.com:your-user-name/astropy.git
cd astropy
git remote add upstream git://github.com/astropy/astropy.git</pre>
</div>
</div>
<div class="section" id="in-detail">
<h4>In detail<a class="headerlink" href="#in-detail" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p class="first">Clone your fork to the local computer:</p>
<div class="highlight-python"><pre>git clone git@github.com:your-user-name/astropy.git</pre>
</div>
</li>
<li><p class="first">Change directory to your new repo:</p>
<div class="highlight-python"><pre>cd astropy</pre>
</div>
<p>Then type:</p>
<div class="highlight-python"><pre>git branch -a</pre>
</div>
<p>to show you all branches.  You&#8217;ll get something like:</p>
<div class="highlight-python"><pre>* master
remotes/origin/master</pre>
</div>
<p>This tells you that you are currently on the <tt class="docutils literal"><span class="pre">master</span></tt> branch, and
that you also have a <tt class="docutils literal"><span class="pre">remote</span></tt> connection to <tt class="docutils literal"><span class="pre">origin/master</span></tt>.
What remote repository is <tt class="docutils literal"><span class="pre">remote/origin</span></tt>? Try <tt class="docutils literal"><span class="pre">git</span> <span class="pre">remote</span> <span class="pre">-v</span></tt> to
see the URLs for the remote.  They will point to your GitHub fork.</p>
<p>Now you want to connect to the Astropy repository, so you can
merge in changes from the trunk:</p>
<div class="highlight-python"><pre>cd astropy
git remote add upstream git://github.com/astropy/astropy.git</pre>
</div>
<p><tt class="docutils literal"><span class="pre">upstream</span></tt> here is just the arbitrary name we&#8217;re using to refer to the
main <a class="reference external" href="http://astropy.org">Astropy</a> repository.</p>
<p>Note that we&#8217;ve used <tt class="docutils literal"><span class="pre">git://</span></tt> for the URL rather than <tt class="docutils literal"><span class="pre">git&#64;</span></tt>. The
<tt class="docutils literal"><span class="pre">git://</span></tt> URL is read only. This means we that we can&#8217;t accidentally (or
deliberately) write to the upstream repo, and we are only going to use it
to merge into our own code.</p>
<p>Just for your own satisfaction, show yourself that you now have a new
&#8216;remote&#8217;, with <tt class="docutils literal"><span class="pre">git</span> <span class="pre">remote</span> <span class="pre">-v</span> <span class="pre">show</span></tt>, giving you something like:</p>
<div class="highlight-python"><pre>upstream   git://github.com/astropy/astropy.git (fetch)
upstream   git://github.com/astropy/astropy.git (push)
origin     git@github.com:your-user-name/astropy.git (fetch)
origin     git@github.com:your-user-name/astropy.git (push)</pre>
</div>
<p>Your fork is now set up correctly, and you are ready to hack away.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="section" id="installing-astropy-in-develop-mode">
<span id="develop-mode"></span><h2>Installing Astropy in develop mode<a class="headerlink" href="#installing-astropy-in-develop-mode" title="Permalink to this headline">¶</a></h2>
<p>Astropy is designed so that the <tt class="docutils literal"><span class="pre">astropy</span></tt> package can generally be used
directly out of the source tree by using <tt class="docutils literal"><span class="pre">import</span> <span class="pre">astropy</span></tt> when running Python
in the source of an Astropy repository clone.  There are some caveats, however:</p>
<ol class="arabic">
<li><p class="first">It is necessary to build C extensions in &#8220;inline&#8221; mode which copies the
built shared libraries into the source tree:</p>
<div class="highlight-python"><pre>$ python setup.py build_ext --inline</pre>
</div>
</li>
<li><p class="first">If you change directories from the root of the repository clone the
<tt class="docutils literal"><span class="pre">astropy</span></tt> package will no longer be importable, and other features may not
work properly.</p>
</li>
</ol>
<p>A more robust solution is to use the <tt class="docutils literal"><span class="pre">setup.py</span> <span class="pre">develop</span></tt> command.  This
semi-permanently installs Astropy on your path in such a way that <tt class="docutils literal"><span class="pre">astropy</span></tt>
is always imported from your repository clone regardless of your working
directory.  This way any edits you make to the code in your repository will
always be immediately available next time you start a Python interpreter and
<tt class="docutils literal"><span class="pre">import</span> <span class="pre">astropy</span></tt>.</p>
<p>Develop mode can be easily disabled again by running
<tt class="docutils literal"><span class="pre">setup.py</span> <span class="pre">develop</span> <span class="pre">-u</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When switching branches it is not <em>generally</em> required to re-run
<tt class="docutils literal"><span class="pre">setup.py</span> <span class="pre">develop</span></tt>, though it may be necessary to run
<tt class="docutils literal"><span class="pre">setup.py</span> <span class="pre">build_ext</span> <span class="pre">--inline</span></tt> again in case you think there might be
differences in the C extensions between the two branches.</p>
</div>
<p>Another useful technique to avoid having to switch develop mode on and off
without disrupting production use of Astropy is to use virtualenv as explained
<a class="reference internal" href="#using-virtualenv"><em>below</em></a>.</p>
</div>
<div class="section" id="workflow-summary">
<h2>Workflow summary<a class="headerlink" href="#workflow-summary" title="Permalink to this headline">¶</a></h2>
<p>This section gives a summary of the workflow once you have successfully forked
the repository, and details are given for each of these steps in the following
sections.</p>
<ul class="simple">
<li>Don&#8217;t use your <tt class="docutils literal"><span class="pre">master</span></tt> branch for anything.  Consider deleting it.</li>
<li>When you are starting a new set of changes, fetch any changes from the
trunk, and start a new <em>feature branch</em> from that.</li>
<li>Make a new branch for each separable set of changes — &#8220;one task, one
branch&#8221; (<a class="reference external" href="http://mail.scipy.org/pipermail/ipython-dev/2010-October/006746.html">ipython git workflow</a>).</li>
<li>Name your branch for the purpose of the changes - e.g.
<tt class="docutils literal"><span class="pre">bugfix-for-issue-14</span></tt> or <tt class="docutils literal"><span class="pre">refactor-database-code</span></tt>.</li>
<li>If you can possibly avoid it, avoid merging trunk or any other branches into
your feature branch while you are working.</li>
<li>If you do find yourself merging from the trunk, consider <a class="reference internal" href="#rebase-on-trunk"><em>Rebasing on trunk</em></a></li>
<li>Ask on the <a class="reference external" href="http://groups.google.com/group/astropy-dev">astropy-dev mailing list</a> if you get stuck.</li>
<li>Ask for code review!</li>
</ul>
<p>This way of working helps to keep work well organized, with readable history.
This in turn makes it easier for project maintainers (that might be you) to
see what you&#8217;ve done, and why you did it.</p>
<p>See <a class="reference external" href="http://www.mail-archive.com/dri-devel&#64;lists.sourceforge.net/msg39091.html">linux git workflow</a> and <a class="reference external" href="http://mail.scipy.org/pipermail/ipython-dev/2010-October/006746.html">ipython git workflow</a> for some explanation.</p>
</div>
<div class="section" id="deleting-your-master-branch">
<h2>Deleting your master branch<a class="headerlink" href="#deleting-your-master-branch" title="Permalink to this headline">¶</a></h2>
<p>It may sound strange, but deleting your own <tt class="docutils literal"><span class="pre">master</span></tt> branch can help reduce
confusion about which branch you are on.  See <a class="reference external" href="http://matthew-brett.github.com/pydagogue/gh_delete_master.html">deleting master on github</a> for
details.</p>
</div>
<div class="section" id="updating-the-mirror-of-trunk">
<span id="update-mirror-trunk"></span><h2>Updating the mirror of trunk<a class="headerlink" href="#updating-the-mirror-of-trunk" title="Permalink to this headline">¶</a></h2>
<p>From time to time you should fetch the upstream (trunk) changes from GitHub:</p>
<div class="highlight-python"><pre>git fetch upstream</pre>
</div>
<p>This will pull down any commits you don&#8217;t have, and set the remote branches to
point to the right commit. For example, &#8216;trunk&#8217; is the branch referred to by
(remote/branchname) <tt class="docutils literal"><span class="pre">upstream/master</span></tt> - and if there have been commits since
you last checked, <tt class="docutils literal"><span class="pre">upstream/master</span></tt> will change after you do the fetch.</p>
</div>
<div class="section" id="making-a-new-feature-branch">
<span id="make-feature-branch"></span><h2>Making a new feature branch<a class="headerlink" href="#making-a-new-feature-branch" title="Permalink to this headline">¶</a></h2>
<p>When you are ready to make some changes to the code, you should start a new
branch. Branches that are for a collection of related edits are often called
&#8216;feature branches&#8217;.</p>
<p>Making an new branch for each set of related changes will make it easier for
someone reviewing your branch to see what you are doing.</p>
<p>Choose an informative name for the branch to remind yourself and the rest of
us what the changes in the branch are for. For example <tt class="docutils literal"><span class="pre">add-ability-to-fly</span></tt>,
or <tt class="docutils literal"><span class="pre">buxfix-for-issue-42</span></tt>.</p>
<div class="highlight-python"><pre># Update the mirror of trunk
git fetch upstream

# Make new feature branch starting at current trunk
git branch my-new-feature upstream/master
git checkout my-new-feature</pre>
</div>
<p>Generally, you will want to keep your feature branches on your public <a class="reference external" href="http://github.com">GitHub</a>
fork. To do this, you <a class="reference external" href="http://schacon.github.com/git/git-push.html">git push</a> this new branch up to your
github repo. Generally (if you followed the instructions in these pages, and
by default), git will have a link to your GitHub repo, called <tt class="docutils literal"><span class="pre">origin</span></tt>. You
push up to your own repo on GitHub with:</p>
<div class="highlight-python"><pre>git push origin my-new-feature</pre>
</div>
<p>In git &gt;= 1.7 you can ensure that the link is correctly set by using the
<tt class="docutils literal"><span class="pre">--set-upstream</span></tt> option:</p>
<div class="highlight-python"><pre>git push --set-upstream origin my-new-feature</pre>
</div>
<p>From now on git will know that <tt class="docutils literal"><span class="pre">my-new-feature</span></tt> is related to the
<tt class="docutils literal"><span class="pre">my-new-feature</span></tt> branch in the GitHub repo.</p>
</div>
<div class="section" id="the-editing-workflow">
<span id="edit-flow"></span><h2>The editing workflow<a class="headerlink" href="#the-editing-workflow" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>Overview<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>git add my_new_file
git commit -am 'NF - some message'
git push</pre>
</div>
</div>
<div class="section" id="in-more-detail">
<h3>In more detail<a class="headerlink" href="#in-more-detail" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Make some changes</p>
</li>
<li><p class="first">See which files have changed with <tt class="docutils literal"><span class="pre">git</span> <span class="pre">status</span></tt> (see <a class="reference external" href="http://schacon.github.com/git/git-status.html">git status</a>).
You&#8217;ll see a listing like this one:</p>
<div class="highlight-python"><pre># On branch ny-new-feature
# Changed but not updated:
#   (use "git add &lt;file&gt;..." to update what will be committed)
#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
#
#    modified:   README
#
# Untracked files:
#   (use "git add &lt;file&gt;..." to include in what will be committed)
#
#    INSTALL
no changes added to commit (use "git add" and/or "git commit -a")</pre>
</div>
</li>
<li><p class="first">Check what the actual changes are with <tt class="docutils literal"><span class="pre">git</span> <span class="pre">diff</span></tt> (<a class="reference external" href="http://schacon.github.com/git/git-diff.html">git diff</a>).</p>
</li>
<li><p class="first">Add any new files to version control <tt class="docutils literal"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">new_file_name</span></tt> (see
<a class="reference external" href="http://schacon.github.com/git/git-add.html">git add</a>).</p>
</li>
<li><p class="first">Add any modified files that you want to commit using
<tt class="docutils literal"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">modified_file_name</span></tt>  (see <a class="reference external" href="http://schacon.github.com/git/git-add.html">git add</a>).</p>
</li>
<li><p class="first">Once you are ready to commit, check with <tt class="docutils literal"><span class="pre">git</span> <span class="pre">status</span></tt> which files are about to be committed:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Changes to be committed:</span>
<span class="c">#   (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span>
<span class="c">#</span>
<span class="c">#    modified:   README</span>
</pre></div>
</div>
<p>Then use <tt class="docutils literal"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-m</span> <span class="pre">'A</span> <span class="pre">commit</span> <span class="pre">message'</span></tt>. The <tt class="docutils literal"><span class="pre">m</span></tt> flag just
signals that you&#8217;re going to type a message on the command line. The <a class="reference external" href="http://schacon.github.com/git/git-commit.html">git
commit</a> manual page might also be useful.</p>
</li>
<li><p class="first">To push the changes up to your forked repo on GitHub, do a <tt class="docutils literal"><span class="pre">git</span>
<span class="pre">push</span></tt> (see <a class="reference external" href="http://schacon.github.com/git/git-push.html">git push</a>).</p>
</li>
</ol>
</div>
</div>
<div class="section" id="asking-for-your-changes-to-be-reviewed-or-merged">
<h2>Asking for your changes to be reviewed or merged<a class="headerlink" href="#asking-for-your-changes-to-be-reviewed-or-merged" title="Permalink to this headline">¶</a></h2>
<p>When you are ready to ask for someone to review your code and consider a merge:</p>
<ol class="arabic">
<li><p class="first">Go to the URL of your forked repo, say
<tt class="docutils literal"><span class="pre">http://github.com/your-user-name/astropy</span></tt>.</p>
</li>
<li><p class="first">Use the &#8216;Switch Branches&#8217; dropdown menu near the top left of the page to
select the branch with your changes:</p>
<img alt="../../_images/branch_dropdown.png" src="../../_images/branch_dropdown.png" />
</li>
<li><p class="first">Click on the &#8216;Pull request&#8217; button:</p>
<img alt="../../_images/pull_button.png" src="../../_images/pull_button.png" />
<p>Enter a title for the set of changes, and some explanation of what you&#8217;ve
done. Say if there is anything you&#8217;d like particular attention for - like a
complicated change or some code you are not happy with.</p>
<p>If you don&#8217;t think your request is ready to be merged, just say so in your
pull request message.  This is still a good way of getting some preliminary
code review.</p>
</li>
</ol>
</div>
<div class="section" id="using-virtualenv">
<span id="id2"></span><h2>Using virtualenv<a class="headerlink" href="#using-virtualenv" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://pypi.python.org/pypi/virtualenv">virtualenv</a> is a tool for creating and activating isolated Python
environments that allow installing and experimenting with Python packages
without disrupting your production Python environment.  When using commands
such as <tt class="docutils literal"><span class="pre">setup.py</span> <span class="pre">develop</span></tt>, for example, it is strong recommended to do
so within a virtualenv.  This is generally preferable to installing a
development version of Astropy into your system site-packages and having to
keep track of whether or not your environment is in a &#8220;known good&#8221;
configuration for production/science use.</p>
<p>Using a virtualenv is also a good way to try out new versions of software that
you&#8217;re not actively doing development work on without disrupting your normal
production environment.</p>
<p>We won&#8217;t provide a full tutorial on using virtualenv here&#8211;the virtualenv
documentation linked to above is a better place to start.  But here is a quick
overview on how to set up a virtualenv for Astropy development with your
default Python version:</p>
<ol class="arabic">
<li><p class="first">Install virtualenv:</p>
<div class="highlight-python"><pre>$ pip install virtualenv</pre>
</div>
<p>or:</p>
<div class="highlight-python"><pre>$ easy_install virtualenv</pre>
</div>
<p>or (on Debian/Ubuntu):</p>
<div class="highlight-python"><pre>$ sudo apt-get install python-virtualenv</pre>
</div>
<p>etc.</p>
</li>
<li><p class="first">(Recommended) Create a root directory for all your virtualenvs under a path
you have write access to.  For example:</p>
<div class="highlight-python"><pre>$ mkdir ~/.virtualenvs</pre>
</div>
</li>
<li><p class="first">Create the Astropy virtualenv:</p>
<div class="highlight-python"><pre>$ virtualenv --distribute --system-site-packages ~/.virtualenvs/astropy-dev</pre>
</div>
<p>The <tt class="docutils literal"><span class="pre">--system-site-packages</span></tt> option inherits all packages already
installed in your system site-packages directory; this frees you from having
to reinstall packages like Numpy and Scipy in the virtualenv.  However, if
you would like your virtualenv to use a development version of Numpy, for
example, you can still install Numpy into the virtualenv and it will take
precedence over the version installed in site-packages.</p>
</li>
<li><p class="first">Activate the virtualenv:</p>
<div class="highlight-python"><pre>$ source ~/.virtualenvs/astropy-dev/bin/activate</pre>
</div>
<p>or if you&#8217;re using a csh-variant:</p>
<div class="highlight-python"><pre>$ source ~/.virtualenvs/astropy-dev/bin/activate.csh</pre>
</div>
<p>virtualenv works on Windows too&#8211;see the documentation for details.</p>
</li>
<li><p class="first">If the virtualenv successfully activated its name should appear in your
shell prompt:</p>
<div class="highlight-python"><pre>(astropy-dev) $</pre>
</div>
<p>The virtualenv can be disabled at any time by entering:</p>
<div class="highlight-python"><pre>(astropy-dev) $ deactivate</pre>
</div>
</li>
<li><p class="first">Now as long as the virtualenv is activated packages you install with
<tt class="docutils literal"><span class="pre">pip</span></tt>, <tt class="docutils literal"><span class="pre">easy_install</span></tt>, or by manually running <tt class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span>
<span class="pre">install</span></tt> will automatically install into your virtualenv instead of the
system site-packages.  Consider installing Astropy in develop mode into the
virtualenv as described <a class="reference internal" href="#develop-mode"><em>above</em></a>.</p>
</li>
</ol>
<div class="section" id="using-virtualenv-with-ipython">
<h3>Using virtualenv with IPython<a class="headerlink" href="#using-virtualenv-with-ipython" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As of IPython 0.13 this functionality is built into IPython and these steps
are not necessary for IPython to recognize that it&#8217;s running with a
virtualenv enabled.</p>
</div>
<p>Each virtualenv has its own <tt class="docutils literal"><span class="pre">bin/</span></tt>, and as IPython is written in pure Python
one can always install IPython directly into a virtualenv.  However, if you
would rather not have to install IPython every time you create a virtualenv, it
also suffices to make IPython virtualenv-aware.</p>
<ol class="arabic">
<li><p class="first">Check to see if you already have an IPython profile in
<tt class="docutils literal"><span class="pre">~/.ipython/profile_default/</span></tt>; if not, create one:</p>
<div class="highlight-python"><pre>$ ipython profile create</pre>
</div>
</li>
<li><p class="first">Edit <tt class="docutils literal"><span class="pre">~/.ipython/profile_default/ipython_config.py</span></tt> and add the
following to the end:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>

<span class="nb">execfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;HOME&#39;</span><span class="p">],</span> <span class="s">&#39;.ipython&#39;</span><span class="p">,</span> <span class="s">&#39;virtualenv.py&#39;</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p class="first">Finally, create the <tt class="docutils literal"><span class="pre">~/.ipython/virtualenv.py</span></tt> module:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">site</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">environ</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">join</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">version_info</span>

<span class="k">if</span> <span class="s">&#39;VIRTUAL_ENV&#39;</span> <span class="ow">in</span> <span class="n">environ</span><span class="p">:</span>
    <span class="n">virtual_env</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;VIRTUAL_ENV&#39;</span><span class="p">),</span>
                       <span class="s">&#39;lib&#39;</span><span class="p">,</span>
                       <span class="s">&#39;python</span><span class="si">%d</span><span class="s">.</span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">version_info</span><span class="p">[:</span><span class="mi">2</span><span class="p">],</span>
                       <span class="s">&#39;site-packages&#39;</span><span class="p">)</span>
    <span class="n">site</span><span class="o">.</span><span class="n">addsitedir</span><span class="p">(</span><span class="n">virtual_env</span><span class="p">)</span>
    <span class="k">print</span> <span class="s">&#39;VIRTUAL_ENV -&gt;&#39;</span><span class="p">,</span> <span class="n">virtual_env</span>
    <span class="k">del</span> <span class="n">virtual_env</span>
<span class="k">del</span> <span class="n">site</span><span class="p">,</span> <span class="n">environ</span><span class="p">,</span> <span class="n">join</span><span class="p">,</span> <span class="n">version_info</span>
</pre></div>
</div>
</li>
</ol>
<p>Now IPython will import all packages from your virtualenv where applicable.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is not magic. If you switch to a virtualenv that uses a different
Python version from your main IPython installation this won&#8217;t help you&#8211;
instead use the appropriate IPython installation for the Python version
in question.</p>
</div>
</div>
<div class="section" id="virtualenvwrapper">
<h3>virtualenvwrapper<a class="headerlink" href="#virtualenvwrapper" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://pypi.python.org/pypi/virtualenvwrapper">virtualenvwrapper</a> is a set of enhancements to virtualenv mostly implemented
through simple shell scripts and aliases.  It automatically organizes all your
virtualenvs under a single directory (as suggested above)&#8211;to create a new
virtualenv you can just use the <tt class="xref py py-obj docutils literal"><span class="pre">mkvirtualenv</span></tt> command and it will
automatically create a new virtualenv of that name in the default location.</p>
<p>To activate a virtualenv with virtualenvwrapper you don&#8217;t need to think about
the environment&#8217;s location of the filesystem or which activate script to run.
Simply run <tt class="xref py py-obj docutils literal"><span class="pre">workon</span></tt>.  You can also list all virtualenvs with
<tt class="xref py py-obj docutils literal"><span class="pre">lsvirtualenv</span></tt>.  That just scratches the surface of the goodies included with
virtualenvwrapper.</p>
<p>The one caveat is that it does not support csh-like shells.  For csh-like
shells there exists <a class="reference external" href="https://bitbucket.org/embray/virtualenvwrapper-csh">virtualenvwrapper-csh</a> which implements most of the
virtualenvwrapper functionality and is otherwise compatible with the original.
There also exists <a class="reference external" href="https://github.com/davidmarble/virtualenvwrapper-win">virtualenvwrapper-win</a> which ports virtualenvwrapper to
Windows batch scripts.</p>
</div>
<div class="section" id="venv">
<h3>venv<a class="headerlink" href="#venv" title="Permalink to this headline">¶</a></h3>
<p>virtualenv is so commonly used in the Python development community that its
functionality was finally added to the standard library in Python 3.3 under
the name <a class="reference external" href="http://docs.python.org/dev/library/venv.html">venv</a>.  venv has not gained wide use yet and is not explicitly
supported by tools like virtualenvwrapper, but it is expected to see wider
adoption in the future.</p>
</div>
</div>
<div class="section" id="some-other-things-you-might-want-to-do">
<h2>Some other things you might want to do<a class="headerlink" href="#some-other-things-you-might-want-to-do" title="Permalink to this headline">¶</a></h2>
<div class="section" id="delete-a-branch-on-github">
<h3>Delete a branch on GitHub<a class="headerlink" href="#delete-a-branch-on-github" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre># change to the master branch (if you still have one, otherwise change to
# another branch)
git checkout master

# delete branch locally
git branch -D my-unwanted-branch

# delete branch on GitHub
git push origin :my-unwanted-branch</pre>
</div>
<p>(Note the colon <tt class="docutils literal"><span class="pre">:</span></tt> before <tt class="docutils literal"><span class="pre">test-branch</span></tt>.  See also:
<a class="reference external" href="http://github.com/guides/remove-a-remote-branch">http://github.com/guides/remove-a-remote-branch</a></p>
</div>
<div class="section" id="several-people-sharing-a-single-repository">
<h3>Several people sharing a single repository<a class="headerlink" href="#several-people-sharing-a-single-repository" title="Permalink to this headline">¶</a></h3>
<p>If you want to work on some stuff with other people, where you are all
committing into the same repository, or even the same branch, then just
share it via GitHub.</p>
<p>First fork Astropy into your account, as from <a class="reference internal" href="#forking"><em>Creating a fork</em></a>.</p>
<p>Then, go to your forked repository GitHub page, say
<tt class="docutils literal"><span class="pre">http://github.com/your-user-name/astropy</span></tt></p>
<p>Click on the &#8216;Admin&#8217; button, and add anyone else to the repo as a
collaborator:</p>
<blockquote>
<div><img alt="../../_images/pull_button.png" src="../../_images/pull_button.png" />
</div></blockquote>
<p>Now all those people can do:</p>
<div class="highlight-python"><pre>git clone git@githhub.com:your-user-name/astropy.git</pre>
</div>
<p>Remember that links starting with <tt class="docutils literal"><span class="pre">git&#64;</span></tt> use the ssh protocol and are
read-write; links starting with <tt class="docutils literal"><span class="pre">git://</span></tt> are read-only.</p>
<p>Your collaborators can then commit directly into that repo with the
usual:</p>
<div class="highlight-python"><pre>git commit -am 'ENH - much better code'
git push origin master # pushes directly into your repo</pre>
</div>
</div>
<div class="section" id="explore-your-repository">
<h3>Explore your repository<a class="headerlink" href="#explore-your-repository" title="Permalink to this headline">¶</a></h3>
<p>To see a graphical representation of the repository branches and
commits:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">gitk</span> <span class="o">--</span><span class="nb">all</span>
</pre></div>
</div>
<p>To see a linear list of commits for this branch:</p>
<div class="highlight-python"><pre>git log</pre>
</div>
<p>You can also look at the <a class="reference external" href="http://github.com/blog/39-say-hello-to-the-network-graph-visualizer">network graph visualizer</a> for your GitHub
repo.</p>
<p>Finally the <a class="reference internal" href="git_configure.html#fancy-log"><em>Fancy log output</em></a> <tt class="docutils literal"><span class="pre">lg</span></tt> alias will give you a reasonable
text-based graph of the repository.</p>
</div>
<div class="section" id="rebasing-on-trunk">
<span id="rebase-on-trunk"></span><h3>Rebasing on trunk<a class="headerlink" href="#rebasing-on-trunk" title="Permalink to this headline">¶</a></h3>
<p>Let&#8217;s say you thought of some work you&#8217;d like to do. You
<a class="reference internal" href="#update-mirror-trunk"><em>Updating the mirror of trunk</em></a> and <a class="reference internal" href="#make-feature-branch"><em>Making a new feature branch</em></a> called
<tt class="docutils literal"><span class="pre">cool-feature</span></tt>. At this stage trunk is at some commit, let&#8217;s call it E. Now
you make some new commits on your <tt class="docutils literal"><span class="pre">cool-feature</span></tt> branch, let&#8217;s call them A,
B, C. Maybe your changes take a while, or you come back to them after a while.
In the meantime, trunk has progressed from commit E to commit (say) G:</p>
<div class="highlight-python"><pre>      A---B---C cool-feature
     /
D---E---F---G trunk</pre>
</div>
<p>At this stage you consider merging trunk into your feature branch, and you
remember that this here page sternly advises you not to do that, because the
history will get messy. Most of the time you can just ask for a review, and
not worry that trunk has got a little ahead. But sometimes, the changes in
trunk might affect your changes, and you need to harmonize them. In this
situation you may prefer to do a rebase.</p>
<p>Rebase takes your changes (A, B, C) and replays them as if they had been made
to the current state of <tt class="docutils literal"><span class="pre">trunk</span></tt>. In other words, in this case, it takes the
changes represented by A, B, C and replays them on top of G. After the rebase,
your history will look like this:</p>
<div class="highlight-python"><pre>              A'--B'--C' cool-feature
             /
D---E---F---G trunk</pre>
</div>
<p>See <a class="reference external" href="http://matthew-brett.github.com/pydagogue/rebase_without_tears.html">rebase without tears</a> for more detail.</p>
<p>To do a rebase on trunk:</p>
<div class="highlight-python"><pre># Update the mirror of trunk
git fetch upstream

# Go to the feature branch
git checkout cool-feature

# Make a backup in case you mess up
git branch tmp cool-feature

# Rebase cool-feature onto trunk
git rebase --onto upstream/master upstream/master cool-feature</pre>
</div>
<p>In this situation, where you are already on branch <tt class="docutils literal"><span class="pre">cool-feature</span></tt>, the last
command can be written more succinctly as:</p>
<div class="highlight-python"><pre>git rebase upstream/master</pre>
</div>
<p>When all looks good you can delete your backup branch:</p>
<div class="highlight-python"><pre>git branch -D tmp</pre>
</div>
<p>If it doesn&#8217;t look good you may need to have a look at
<a class="reference internal" href="#recovering-from-mess-up"><em>Recovering from mess-ups</em></a>.</p>
<p>If you have made changes to files that have also changed in trunk, this may
generate merge conflicts that you need to resolve - see the <a class="reference external" href="http://schacon.github.com/git/git-rebase.html">git rebase</a> man
page for some instructions at the end of the &#8220;Description&#8221; section. There is
some related help on merging in the git user manual - see <a class="reference external" href="http://schacon.github.com/git/user-manual.html#resolving-a-merge">resolving a
merge</a>.</p>
<p>If your feature branch is already on GitHub and you rebase, you will have to force
push the branch; a normal push would give an error. If the branch you rebased is
called <tt class="docutils literal"><span class="pre">cool-feature</span></tt> and your GitHub fork is available as the remote called <tt class="docutils literal"><span class="pre">origin</span></tt>,
you use this command to force-push:</p>
<div class="highlight-python"><pre>git push -f origin cool-feature</pre>
</div>
<p>Note that this will overwrite the branch on GitHub, i.e. this is one of the few ways
you can actually lose commits with git.
Also note that it is never allowed to force push to the main astropy repo (typically
called <tt class="docutils literal"><span class="pre">upstream</span></tt>), because this would re-write commit history and thus cause problems
for all others.</p>
</div>
<div class="section" id="recovering-from-mess-ups">
<span id="recovering-from-mess-up"></span><h3>Recovering from mess-ups<a class="headerlink" href="#recovering-from-mess-ups" title="Permalink to this headline">¶</a></h3>
<p>Sometimes, you mess up merges or rebases. Luckily, in git it is relatively
straightforward to recover from such mistakes.</p>
<p>If you mess up during a rebase:</p>
<div class="highlight-python"><pre>git rebase --abort</pre>
</div>
<p>If you notice you messed up after the rebase:</p>
<div class="highlight-python"><pre># Reset branch back to the saved point
git reset --hard tmp</pre>
</div>
<p>If you forgot to make a backup branch:</p>
<div class="highlight-python"><pre># Look at the reflog of the branch
git reflog show cool-feature

8630830 cool-feature@{0}: commit: BUG: io: close file handles immediately
278dd2a cool-feature@{1}: rebase finished: refs/heads/my-feature-branch onto 11ee694744f2552d
26aa21a cool-feature@{2}: commit: BUG: lib: make seek_gzip_factory not leak gzip obj
...

# Reset the branch to where it was before the botched rebase
git reset --hard cool-feature@{2}</pre>
</div>
</div>
<div class="section" id="rewriting-commit-history">
<span id="id3"></span><h3>Rewriting commit history<a class="headerlink" href="#rewriting-commit-history" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Do this only for your own feature branches.</p>
</div>
<p>There&#8217;s an embarrassing typo in a commit you made? Or perhaps the you
made several false starts you would like the posterity not to see.</p>
<p>This can be done via <em>interactive rebasing</em>.</p>
<p>Suppose that the commit history looks like this:</p>
<div class="highlight-python"><pre>git log --oneline
eadc391 Fix some remaining bugs
a815645 Modify it so that it works
2dec1ac Fix a few bugs + disable
13d7934 First implementation
6ad92e5 * masked is now an instance of a new object, MaskedConstant
29001ed Add pre-nep for a copule of structured_array_extensions.
...</pre>
</div>
<p>and <tt class="docutils literal"><span class="pre">6ad92e5</span></tt> is the last commit in the <tt class="docutils literal"><span class="pre">cool-feature</span></tt> branch. Suppose we
want to make the following changes:</p>
<ul class="simple">
<li>Rewrite the commit message for <tt class="docutils literal"><span class="pre">13d7934</span></tt> to something more sensible.</li>
<li>Combine the commits <tt class="docutils literal"><span class="pre">2dec1ac</span></tt>, <tt class="docutils literal"><span class="pre">a815645</span></tt>, <tt class="docutils literal"><span class="pre">eadc391</span></tt> into a single one.</li>
</ul>
<p>We do as follows:</p>
<div class="highlight-python"><pre># make a backup of the current state
git branch tmp HEAD
# interactive rebase
git rebase -i 6ad92e5</pre>
</div>
<p>This will open an editor with the following text in it:</p>
<div class="highlight-python"><pre>pick 13d7934 First implementation
pick 2dec1ac Fix a few bugs + disable
pick a815645 Modify it so that it works
pick eadc391 Fix some remaining bugs

# Rebase 6ad92e5..eadc391 onto 6ad92e5
#
# Commands:
#  p, pick = use commit
#  r, reword = use commit, but edit the commit message
#  e, edit = use commit, but stop for amending
#  s, squash = use commit, but meld into previous commit
#  f, fixup = like "squash", but discard this commit's log message
#
# If you remove a line here THAT COMMIT WILL BE LOST.
# However, if you remove everything, the rebase will be aborted.
#</pre>
</div>
<p>To achieve what we want, we will make the following changes to it:</p>
<div class="highlight-python"><pre>r 13d7934 First implementation
pick 2dec1ac Fix a few bugs + disable
f a815645 Modify it so that it works
f eadc391 Fix some remaining bugs</pre>
</div>
<p>This means that (i) we want to edit the commit message for <tt class="docutils literal"><span class="pre">13d7934</span></tt>, and
(ii) collapse the last three commits into one. Now we save and quit the
editor.</p>
<p>Git will then immediately bring up an editor for editing the commit message.
After revising it, we get the output:</p>
<div class="highlight-python"><pre>[detached HEAD 721fc64] FOO: First implementation
 2 files changed, 199 insertions(+), 66 deletions(-)
[detached HEAD 0f22701] Fix a few bugs + disable
 1 files changed, 79 insertions(+), 61 deletions(-)
Successfully rebased and updated refs/heads/my-feature-branch.</pre>
</div>
<p>and the history looks now like this:</p>
<div class="highlight-python"><pre>0f22701 Fix a few bugs + disable
721fc64 ENH: Sophisticated feature
6ad92e5 * masked is now an instance of a new object, MaskedConstant</pre>
</div>
<p>If it went wrong, recovery is again possible as explained <a class="reference internal" href="#recovering-from-mess-up"><em>above</em></a>.</p>
</div>
<div class="section" id="converting-a-github-issue-to-a-pull-request">
<h3>Converting a GitHub issue to a pull request<a class="headerlink" href="#converting-a-github-issue-to-a-pull-request" title="Permalink to this headline">¶</a></h3>
<p>Sometimes you have a branch in your own GitHub repository designed to
fix one particular issue.  If that issue is listed on GitHub, a natural
way to address it is to convert the issue to a pull request by
attaching code with the fix to the issue. This can currently only be
done using the GitHub API (there&#8217;s no button or anything on the web
site that does it, at least as of 2/6/2012). There are two options to do this:</p>
<ul>
<li><p class="first">You can use the script at <a class="reference external" href="https://gist.github.com/1750715">https://gist.github.com/1750715</a> which will
do this for you automatically - just download the script and run it as
a python command-line script, using the <tt class="docutils literal"><span class="pre">python</span> <span class="pre">issue2pr.py</span> <span class="pre">--help</span></tt>
option to determine the precise usage.</p>
</li>
<li><p class="first">You can use the <tt class="docutils literal"><span class="pre">hub</span></tt> command-line utility provided <a class="reference external" href="https://github.com/defunkt/hub">here</a> by GitHub. Once installed, you can
attach a branch to a pull request by doing:</p>
<div class="highlight-python"><pre>hub pull-request -i &lt;ID&gt; -b astropy:master -h &lt;USER&gt;:&lt;BRANCH&gt;</pre>
</div>
<p>where <tt class="docutils literal"><span class="pre">&lt;ID&gt;</span></tt> is the ID of the issue, <tt class="docutils literal"><span class="pre">&lt;USER&gt;</span></tt> is the username, and
<tt class="docutils literal"><span class="pre">&lt;BRANCH&gt;</span></tt> is the name of the branch you want to attach to the
issue. For example:</p>
<div class="highlight-python"><pre>hub pull-request -i 42 -b astropy:master -h galahad:feature</pre>
</div>
<p>will attach the <tt class="docutils literal"><span class="pre">feature</span></tt> branch from <tt class="docutils literal"><span class="pre">galahad</span></tt>&#8216;s Astropy
repository to issue 42.</p>
<p>The <tt class="docutils literal"><span class="pre">hub</span></tt> command can do a lot more to interact with GitHub, so be
sure to read their documentation. For example, you can fetch all
branches of a repository for a given user by doing:</p>
<div class="highlight-python"><pre>hub fetch &lt;USER&gt;</pre>
</div>
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">


<h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">Workflow for Developers</a><ul>
<li><a class="reference internal" href="#creating-a-fork">Creating a fork</a><ul>
<li><a class="reference internal" href="#set-up-and-configure-a-github-account">Set up and configure a GitHub account</a></li>
<li><a class="reference internal" href="#create-your-own-fork-of-a-repository">Create your own fork of a repository</a></li>
<li><a class="reference internal" href="#setting-up-the-fork-to-work-on">Setting up the fork to work on</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#in-detail">In detail</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#installing-astropy-in-develop-mode">Installing Astropy in develop mode</a></li>
<li><a class="reference internal" href="#workflow-summary">Workflow summary</a></li>
<li><a class="reference internal" href="#deleting-your-master-branch">Deleting your master branch</a></li>
<li><a class="reference internal" href="#updating-the-mirror-of-trunk">Updating the mirror of trunk</a></li>
<li><a class="reference internal" href="#making-a-new-feature-branch">Making a new feature branch</a></li>
<li><a class="reference internal" href="#the-editing-workflow">The editing workflow</a><ul>
<li><a class="reference internal" href="#id1">Overview</a></li>
<li><a class="reference internal" href="#in-more-detail">In more detail</a></li>
</ul>
</li>
<li><a class="reference internal" href="#asking-for-your-changes-to-be-reviewed-or-merged">Asking for your changes to be reviewed or merged</a></li>
<li><a class="reference internal" href="#using-virtualenv">Using virtualenv</a><ul>
<li><a class="reference internal" href="#using-virtualenv-with-ipython">Using virtualenv with IPython</a></li>
<li><a class="reference internal" href="#virtualenvwrapper">virtualenvwrapper</a></li>
<li><a class="reference internal" href="#venv">venv</a></li>
</ul>
</li>
<li><a class="reference internal" href="#some-other-things-you-might-want-to-do">Some other things you might want to do</a><ul>
<li><a class="reference internal" href="#delete-a-branch-on-github">Delete a branch on GitHub</a></li>
<li><a class="reference internal" href="#several-people-sharing-a-single-repository">Several people sharing a single repository</a></li>
<li><a class="reference internal" href="#explore-your-repository">Explore your repository</a></li>
<li><a class="reference internal" href="#rebasing-on-trunk">Rebasing on trunk</a></li>
<li><a class="reference internal" href="#recovering-from-mess-ups">Recovering from mess-ups</a></li>
<li><a class="reference internal" href="#rewriting-commit-history">Rewriting commit history</a></li>
<li><a class="reference internal" href="#converting-a-github-issue-to-a-pull-request">Converting a GitHub issue to a pull request</a></li>
</ul>
</li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>

<footer class="footer">
  <p class="pull-right">
    <a href="http://github.com/astropy/astropy/tree/v0.2.1/docs/development/workflow/development_workflow.rst">Edit This Page on Github</a> &nbsp;
    <a href="../../_sources/development/workflow/development_workflow.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2011-2013, The Astropy Developers.<br/>
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3+. &nbsp;
    Last built 03 Apr 2013. <br/>
  </p>
</footer>
 <!-- End original user content -->


<br>
<br>
<br>


<style type="text/css">
  .rtd-badge {
    position: fixed;
    display: block;
    bottom: 5px;
    height: 40px;
    text-indent: -9999em;
    border-radius: 3px;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 1px 0 rgba(255, 255, 255, 0.2) inset;
    -moz-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 1px 0 rgba(255, 255, 255, 0.2) inset;
    -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 1px 0 rgba(255, 255, 255, 0.2) inset;
  }
  #version_menu {
    position: fixed;
    display: none;
    bottom: 11px;
    right: 166px;
    list-style-type: none;
    margin: 0;
  }
  .footer_popout:hover #version_menu {
    display: block;
  }
  #version_menu li {
    display: block;
    float: right;
  }
  #version_menu li a {
    display: block;
    padding: 6px 10px 4px 10px;
    margin: 7px 7px 0 0;
    font-weight: bold;
    font-size: 14px;
    height: 20px;
    line-height: 17px;
    text-decoration: none;
    color: #fff;
    background: #8ca1af url(../images/gradient-light.png) bottom left repeat-x;
    border-radius: 3px;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    box-shadow: 0 1px 1px #465158;
    -moz-box-shadow: 0 1px 1px #465158;
    -webkit-box-shadow: 0 1px 1px #465158;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);
  }
  #version_menu li a:hover {
    text-decoration: none;
    background-color: #697983;
    box-shadow: 0 1px 0px #465158;
    -moz-box-shadow: 0 1px 0px #465158;
    -webkit-box-shadow: 0 1px 0px #465158;
  }
  .rtd-badge.rtd {
    background: #3b4449 url(//media.readthedocs.org//images/badge-rtd.png) scroll 0px -46px no-repeat;
    border: 1px solid #282E32;
    width: 41px;
    right: 5px;
  }
  .footer_popout:hover .rtd-badge.rtd {
    background-position: top left;
    width: 160px;
  }
  .rtd-badge.revsys { background: #465158 url(//media.readthedocs.org//images/badge-revsys.png) top left no-repeat;
    border: 1px solid #1C5871;
    width: 290px;
    right: 173px;
  }
  .rtd-badge.revsys-inline-sponsored {
    position: inherit;
    margin-left: auto;
    margin-right: 175px;
    margin-bottom: 5px;
    background: #465158 url(//media.readthedocs.org//images/badge-revsys.png) top left no-repeat;
    border: 1px solid #1C5871;
    width: 290px;
    right: 173px;
  }
  .rtd-badge.revsys-inline {
    position: inherit;
    margin-left: auto;
    margin-right: 175px;
    margin-bottom: 5px;
    background: #465158 url(//media.readthedocs.org//images/badge-revsys-sm.png) top left no-repeat;
    border: 1px solid #1C5871;
    width: 205px;
    right: 173px;
  }

</style>
<div class="rtd_doc_footer">
  <div class="footer_popout">
    <a href="//readthedocs.org/projects/astropy/?fromdocs=astropy" class="rtd-badge rtd"> Brought to you by Read the Docs</a>
    <ul id="version_menu">
      
        <li><a href="/en/latest/">latest</a></li>
      
        <li><a href="/en/add-mpl-to-rtd-pip-req/">add-mpl-to-rtd-pip-req</a></li>
      
        <li><a href="/en/v0.2.1/">v0.2.1</a></li>
      
        <li><a href="/en/v0.2/">v0.2</a></li>
      
        <li><a href="/en/v0.1/">v0.1</a></li>
      
    </ul>
  </div>
</div>
<!-- RTD Analytics Code -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17997319-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


<!-- User Analytics Code -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30968842-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>